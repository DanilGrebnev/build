"use strict";(self.webpackChunkftkm_website=self.webpackChunkftkm_website||[]).push([[605],{7605:function(e,n,t){t.r(n),t.d(n,{default:function(){return he}});var r=t(7627),s=t(5772),i=t(8439),o=t(3768),c=t(1087),a="s_addBtn__AZTop",u=t(184),l=function(){return(0,u.jsx)(c.rU,{className:a,to:"newsEditor",children:(0,u.jsx)(o.Z,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e",children:(0,u.jsx)(i.Z,{sx:{cursor:"pointer"},color:"info",fontSize:"large"})})})},d=t(9480),f=t(8788),x=t(681),h=t(7745),j="s_btnContainer__kiiFM",p=function(){var e=(0,x.s)().getNews,n=(0,h.u)().isCompleteMoreNews,t=(0,f.C)((function(e){return e.news})).loading,r=n?"\u043d\u043e\u0432\u043e\u0441\u0442\u0438 \u043a\u043e\u043d\u0447\u0430\u043b\u0438\u0441\u044c":"\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451";return(0,u.jsx)("div",{className:j,children:(0,u.jsx)(d.f,{text:r,size:"medium",disabled:t||n,loading:t,onClick:function(){return e()}})})},m=t(1413),w=t(2791),_=t(4165),C=t(5861),v=t(6151),Z=t(5289),g=t(7123),b=t(9157),k=t(1691),N=t(5661),y=t(5931),E=w.forwardRef((function(e,n){return(0,u.jsx)(y.Z,(0,m.Z)({direction:"up",ref:n},e))})),M=function(e){var n=e.open,t=e.dialogTitle,r=e.dialogContent,s=e.handleClose,i=e.onClickAction;return(0,u.jsx)("div",{children:(0,u.jsxs)(Z.Z,{open:n,TransitionComponent:E,keepMounted:!0,onClose:s,"aria-describedby":"alert-dialog-slide-description",children:[(0,u.jsx)(N.Z,{children:t}),r&&(0,u.jsx)(b.Z,{children:(0,u.jsx)(k.Z,{id:"alert-dialog-slide-description",children:r})}),(0,u.jsxs)(g.Z,{children:[(0,u.jsx)(v.Z,{onClick:s,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,u.jsx)(v.Z,{color:"error",onClick:function(){i(),s()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})})},T=t(5049),S=t(9439),R=t(3662),A=t(6580),D=t(896),W="s_date__azkaw",O=function(e){var n=e.createdDate;return(0,u.jsxs)("div",{className:W,children:[(0,u.jsx)(D.Z,{sx:{color:"#0f78ed"}}),(0,u.jsx)("p",{children:"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438:"}),(0,u.jsx)("p",{children:n})]})},H=t(3930),z=t(7247),F=t(3400),I=function(e){var n=e.onClick;return(0,u.jsx)(o.Z,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",children:(0,u.jsx)(F.Z,{onClick:n,children:(0,u.jsx)(z.Z,{sx:{color:"red"}})})})},L=function(e){var n=e.onClick;return e.isLoading?(0,u.jsx)(H.a,{circularSize:20}):(0,u.jsx)(I,{onClick:n})},q=t(5763),B=function(){return(0,u.jsx)(o.Z,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",children:(0,u.jsx)(F.Z,{children:(0,u.jsx)(q.Z,{sx:{color:"black"}})})})},J=function(e){var n=e.id;return(0,u.jsx)(c.rU,{to:"newsEditor/"+n,children:(0,u.jsx)(B,{})})},U="style_newsItem__8Mpqb",V="style_itemInfo__45ceM",X="style_btnGroup__Xiw6E",G=function(e){var n=e._id,t=(e.body,e.createdDate),r=e.title,s=(e.imgName,e.isDeleteLoading),i=(0,T.T)(),o=(0,x.s)().getNews,c=function(){var e=w.useState(!1),n=(0,S.Z)(e,2),t=n[0],r=n[1];return{open:t,toggleModal:w.useCallback((function(){r((function(e){return!e}))}),[])}}(),a=c.open,l=c.toggleModal,d=function(){var e=(0,C.Z)((0,_.Z)().mark((function e(n){return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i((0,A.ku)(n)),e.next=3,i(R.H.deleteNews(n));case 3:if(e.sent.error){e.next=9;break}return i((0,A.Jo)()),i((0,A.b)()),o(0),e.abrupt("return");case 9:i((0,A.ku)(n));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,u.jsx)("div",{className:U,children:(0,u.jsxs)("div",{className:V,children:[(0,u.jsx)("h1",{children:r}),(0,u.jsx)(O,{createdDate:t}),(0,u.jsxs)("div",{className:X,children:[(0,u.jsx)(J,{id:n}),(0,u.jsx)(L,{isLoading:s,onClick:l}),(0,u.jsx)(M,{open:a,handleClose:l,dialogTitle:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c?",onClickAction:function(){return d(n)}})]})]})})},Y="s_newsContainer__WfAgY",K=function(){var e=(0,f.C)((function(e){return e.news})).news,n=(0,x.s)().getNews;return(0,w.useEffect)((function(){e.length||n()}),[]),(0,u.jsx)("section",{className:Y,children:e.map((function(e){return(0,u.jsx)(G,(0,m.Z)({},e),e._id)}))})},P="style_news__zH6Vt",Q="style_searchContainer__I-LAl",$=function(){return(0,u.jsxs)("section",{className:P,children:[(0,u.jsxs)("div",{className:Q,children:[(0,u.jsx)(l,{}),(0,u.jsx)(p,{})]}),(0,u.jsx)(K,{})]})},ee=t(1544),ne=t(9658),te=t(7317),re=t(6125),se=function(e){var n=e.title,t=e.decription,r=e.type,s=e.showModal;return(0,u.jsx)(re.Z,{in:s,children:(0,u.jsxs)(ne.Z,{severity:r,children:[(0,u.jsx)(te.Z,{children:n}),t]})})},ie=t(65),oe=function(){var e=(0,f.C)((function(e){return e.news})).newsFields,n=e.title.trim(),t=e.body.trim();return{isEmpty:!(t&&n),isEmptyBody:!!t,isEmptyTitle:!!n}},ce=function(e){var n=e.onChange,t=(0,f.C)((function(e){return e.news})).newsFields,r=oe().isEmptyBody;return(0,u.jsx)(ie.Z,{error:!r,value:t.body,name:"body",autoComplete:"off",onChange:n,sx:{maxWidth:"1000px"},label:"\u0422\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",helperText:!r&&"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c",multiline:!0,minRows:8,maxRows:20})},ae=function(e){var n=e.id,t=(0,w.useState)(!1),r=(0,S.Z)(t,2),i=r[0],o=r[1],c=(0,f.C)((function(e){return e.news})),a=c.newsFields,l=c.fetchNews,x=function(){var e=(0,T.T)(),n=(0,s.s0)(),t=function(){var t=(0,C.Z)((0,_.Z)().mark((function t(r,s){return(0,_.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(R.H.editNews({body:r,_id:s}));case 2:if("rejected"!==t.sent.meta.requestStatus){t.next=6;break}return setTimeout((function(){e((0,A.Mr)())}),3e3),t.abrupt("return");case 6:e((0,A.Jo)()),setTimeout((function(){e((0,A.Mr)()),n("/cms")}),3e3);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),r=function(){var t=(0,C.Z)((0,_.Z)().mark((function t(r){return(0,_.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(R.H.postNews(r));case 2:if("rejected"!==t.sent.meta.requestStatus){t.next=6;break}return setTimeout((function(){e((0,A.Mr)())}),3e3),t.abrupt("return");case 6:e((0,A.Jo)()),setTimeout((function(){e((0,A.Mr)()),n("/cms")}),3e3);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{postNews:r,editNews:t}}(),h=x.postNews,j=x.editNews,p=oe().isEmpty,m=n?function(){return j(a,n)}:function(){return h(a)},v=n?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c";return(0,u.jsx)(d.f,{onClick:function(){o(!0),m(),setTimeout(o,3e3,!1)},loading:l,text:v,disabled:p||i})},ue=function(e){var n=e.onChange,t=(0,f.C)((function(e){return e.news})).newsFields,r=oe().isEmptyTitle;return(0,u.jsx)(ie.Z,{autoComplete:"off",error:!r,value:t.title,name:"title",onChange:n,sx:{maxWidth:"1000px"},label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0438",helperText:!r&&"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"})},le="style_EditorContainer__Cf5HX",de="style_CMS__4b1tA",fe="style_block__fbdOV",xe=(0,u.jsx)(r.m,{Component:function(){var e=(0,s.UO)()._id,n=function(){var e=(0,T.T)();return{getOneNews:function(n){e(R.H.getOneNews(n))}}}(),t=n.getOneNews,r=function(){var e=(0,T.T)();return{setData:(0,w.useCallback)((function(n){e((0,A._A)({name:n.target.name,value:n.target.value}))}),[])}}().setData,i=(0,f.C)((function(e){return e.news})),o=i.showNewsResponseModal,c=i.newsResponseModalContent;(0,w.useEffect)((function(){e&&t(e)}),[e]);var a=c===ee.h.NEWS_SEND_ERROR||c===ee.h.NEWS_EDIT_ERROR?"error":"success";return(0,u.jsxs)("div",{className:le,children:[(0,u.jsx)(ue,{onChange:r}),(0,u.jsx)(ce,{onChange:r}),(0,u.jsx)(ae,{id:e}),(0,u.jsx)(se,{type:a,title:c,showModal:o})]})}}),he=function(){return(0,u.jsx)("section",{id:"CMS",className:de,children:(0,u.jsx)("div",{id:"CMS-body",className:fe,children:(0,u.jsxs)(s.Z5,{children:[(0,u.jsx)(s.AW,{path:"/",element:(0,u.jsx)($,{})}),(0,u.jsx)(s.AW,{path:"newsEditor",element:xe}),(0,u.jsx)(s.AW,{path:"newsEditor/:_id",element:xe})]})})})}}}]);
//# sourceMappingURL=605.31e9c4cd.chunk.js.map